{
  "scrapeId": "1a7c348b-b8be-4de8-aec8-013094f126a3",
  "sourceURL": "https://angular.dev/tools/cli/schematics-authoring",
  "statusCode": 200,
  "data": {
    "markdown": "Skip to main content\n\nmenu\n\nmenuDocs\n\n- Introduction\n\n  - [What is Angular?](https://angular.dev/overview)\n  - [Installation](https://angular.dev/installation)\n  - Essentials\n  - [Start coding! ðŸš€](https://angular.dev/tutorials/learn-angular)\n- In-depth Guides\n\n  - Signals\n  - Components\n  - Templates\n  - Directives\n  - Dependency Injection\n  - Routing\n  - Forms\n  - HTTP Client\n  - Server-side & hybrid-rendering\n  - Testing\n  - Internationalization\n  - Experimental features\n- Developer Tools\n\n  - Angular CLI\n  - Libraries\n  - [DevTools](https://angular.dev/tools/devtools)\n  - [Language Service](https://angular.dev/tools/language-service)\n- Best Practices\n\n  - [Style Guide](https://angular.dev/style-guide)\n  - [Security](https://angular.dev/best-practices/security)\n  - [Accessibility](https://angular.dev/best-practices/a11y)\n  - Performance\n  - [Keeping up-to-date](https://angular.dev/update)\n- Extended Ecosystem\n\n  - [NgModules](https://angular.dev/guide/ngmodules/overview)\n  - Animations\n  - Using RxJS with Angular\n  - Service Workers & PWAs\n  - [Web workers](https://angular.dev/ecosystem/web-workers)\n  - [Custom build pipeline](https://angular.dev/ecosystem/custom-build-pipeline)\n  - [Angular Fire](https://github.com/angular/angularfire#readme)\n  - [Google Maps](https://github.com/angular/components/tree/main/src/google-maps#readme)\n  - [Google Pay](https://github.com/google-pay/google-pay-button#angular)\n  - [YouTube player](https://github.com/angular/components/blob/main/src/youtube-player/README.md)\n  - [Angular CDK](https://material.angular.io/cdk/categories)\n  - [Angular Material](https://material.angular.io/)\n\n- arrow\\_backAngular CLI\n  - [Overview](https://angular.dev/tools/cli)\n  - [Local set-up](https://angular.dev/tools/cli/setup-local)\n  - [Building Angular apps](https://angular.dev/tools/cli/build)\n  - [Serving Angular apps for development](https://angular.dev/tools/cli/serve)\n  - [Deployment](https://angular.dev/tools/cli/deployment)\n  - [End-to-End Testing](https://angular.dev/tools/cli/end-to-end)\n  - [Migrating to new build system](https://angular.dev/tools/cli/build-system-migration)\n  - [Build environments](https://angular.dev/tools/cli/environments)\n  - [Angular CLI builders](https://angular.dev/tools/cli/cli-builder)\n  - [Generating code using schematics](https://angular.dev/tools/cli/schematics)\n  - [Authoring schematics](https://angular.dev/tools/cli/schematics-authoring)\n  - [Schematics for libraries](https://angular.dev/tools/cli/schematics-for-libraries)\n  - [Template type checking](https://angular.dev/tools/cli/template-typecheck)\n  - [Ahead-of-time (AOT) compilation](https://angular.dev/tools/cli/aot-compiler)\n  - [AOT metadata errors](https://angular.dev/tools/cli/aot-metadata-errors)\n\nThis site uses cookies from Google to deliver its services and to analyze traffic.\n\n[Learn more](https://policies.google.com/technologies/cookies) Ok, Got it\n\nYou can create your own schematics to operate on Angular projects.\nLibrary developers typically package schematics with their libraries to integrate them with the Angular CLI.\nYou can also create stand-alone schematics to manipulate the files and constructs in Angular applications as a way of customizing them for your development environment and making them conform to your standards and constraints.\nSchematics can be chained, running other schematics to perform complex operations.\n\nManipulating the code in an application has the potential to be both very powerful and correspondingly dangerous.\nFor example, creating a file that already exists would be an error, and if it was applied immediately, it would discard all the other changes applied so far.\nThe Angular Schematics tooling guards against side effects and errors by creating a virtual file system.\nA schematic describes a pipeline of transformations that can be applied to the virtual file system.\nWhen a schematic runs, the transformations are recorded in memory, and only applied in the real file system once they're confirmed to be valid.\n\n## [Schematics concepts](https://angular.dev/tools/cli/schematics-authoring\\#schematics-concepts)\n\nThe public API for schematics defines classes that represent the basic concepts.\n\n- The virtual file system is represented by a `Tree`.\nThe `Tree` data structure contains a _base_ (a set of files that already exists) and a _staging area_ (a list of changes to be applied to the base).\nWhen making modifications, you don't actually change the base, but add those modifications to the staging area.\n\n- A `Rule` object defines a function that takes a `Tree`, applies transformations, and returns a new `Tree`.\nThe main file for a schematic, `index.ts`, defines a set of rules that implement the schematic's logic.\n\n- A transformation is represented by an `Action`.\nThere are four action types: `Create`, `Rename`, `Overwrite`, and `Delete`.\n\n- Each schematic runs in a context, represented by a `SchematicContext` object.\n\n\nThe context object passed into a rule provides access to utility functions and metadata that the schematic might need to work with, including a logging API to help with debugging.\nThe context also defines a _merge strategy_ that determines how changes are merged from the staged tree into the base tree.\nA change can be accepted or ignored, or throw an exception.\n\n### [Defining rules and actions](https://angular.dev/tools/cli/schematics-authoring\\#defining-rules-and-actions)\n\nWhen you create a new blank schematic with the [Schematics CLI](https://angular.dev/tools/cli/schematics-authoring#schematics-cli), the generated entry function is a _rule factory_.\nA `RuleFactory` object defines a higher-order function that creates a `Rule`.\n\n### index.ts\n\n```\n      import { Rule, SchematicContext, Tree } from '@angular-devkit/schematics';// You don't have to export the function as default.// You can also have more than one rule factory per file.export function helloWorld(_options: any): Rule { return (tree: Tree,_context: SchematicContext) => {   return tree; };}\n\n```\n\ncheck\n\nYour rules can make changes to your projects by calling external tools and implementing logic.\nYou need a rule, for example, to define how a template in the schematic is to be merged into the hosting project.\n\nRules can make use of utilities provided with the `@schematics/angular` package.\nLook for helper functions for working with modules, dependencies, TypeScript, AST, JSON, Angular CLI workspaces and projects, and more.\n\n### index.ts\n\n```\n      import {  JsonAstObject,  JsonObject,  JsonValue,  Path,  normalize,  parseJsonAst,  strings,} from '@angular-devkit/core';\n\n```\n\ncheck\n\n### [Defining input options with a schema and interfaces](https://angular.dev/tools/cli/schematics-authoring\\#defining-input-options-with-a-schema-and-interfaces)\n\nRules can collect option values from the caller and inject them into templates.\nThe options available to your rules, with their allowed values and defaults, are defined in the schematic's JSON schema file, `<schematic>/schema.json`.\nDefine variable or enumerated data types for the schema using TypeScript interfaces.\n\nThe schema defines the types and default values of variables used in the schematic.\nFor example, the hypothetical \"Hello World\" schematic might have the following schema.\n\n### src/hello-world/schema.json\n\n```\n      {    \"properties\": {        \"name\": {            \"type\": \"string\",            \"minLength\": 1,            \"default\": \"world\"        },        \"useColor\": {            \"type\": \"boolean\"        }    }}\n\n```\n\ncheck\n\nSee examples of schema files for the Angular CLI command schematics in [`@schematics/angular`](https://github.com/angular/angular-cli/blob/main/packages/schematics/angular/application/schema.json).\n\n### [Schematic prompts](https://angular.dev/tools/cli/schematics-authoring\\#schematic-prompts)\n\nSchematic _prompts_ introduce user interaction into schematic execution.\nConfigure schematic options to display a customizable question to the user.\nThe prompts are displayed before the execution of the schematic, which then uses the response as the value for the option.\nThis lets users direct the operation of the schematic without requiring in-depth knowledge of the full spectrum of available options.\n\nThe \"Hello World\" schematic might, for example, ask the user for their name, and display that name in place of the default name \"world\".\nTo define such a prompt, add an `x-prompt` property to the schema for the `name` variable.\n\nSimilarly, you can add a prompt to let the user decide whether the schematic uses color when executing its hello action.\nThe schema with both prompts would be as follows.\n\n### src/hello-world/schema.json\n\n```\n      {    \"properties\": {        \"name\": {            \"type\": \"string\",            \"minLength\": 1,            \"default\": \"world\",            \"x-prompt\": \"What is your name?\"        },        \"useColor\": {            \"type\": \"boolean\",            \"x-prompt\": \"Would you like the response in color?\"        }    }}\n\n```\n\ncheck\n\n#### [Prompt short-form syntax](https://angular.dev/tools/cli/schematics-authoring\\#prompt-short-form-syntax)\n\nThese examples use a shorthand form of the prompt syntax, supplying only the text of the question.\nIn most cases, this is all that is required.\nNotice however, that the two prompts expect different types of input.\nWhen using the shorthand form, the most appropriate type is automatically selected based on the property's schema.\nIn the example, the `name` prompt uses the `input` type because it is a string property.\nThe `useColor` prompt uses a `confirmation` type because it is a Boolean property.\nIn this case, \"yes\" corresponds to `true` and \"no\" corresponds to `false`.\n\nThere are three supported input types.\n\n| Input type | Details |\n| :-- | :-- |\n| confirmation | A yes or no question; ideal for Boolean options. |\n| input | Textual input; ideal for string or number options. |\n| list | A predefined set of allowed values. |\n\nIn the short form, the type is inferred from the property's type and constraints.\n\n| Property schema | Prompt type |\n| :-- | :-- |\n| \"type\": \"boolean\" | confirmation (\"yes\"= `true`, \"no\"= `false`) |\n| \"type\": \"string\" | input |\n| \"type\": \"number\" | input (only valid numbers accepted) |\n| \"type\": \"integer\" | input (only valid numbers accepted) |\n| \"enum\": \\[â€¦\\] | list (enum members become list selections) |\n\nIn the following example, the property takes an enumerated value, so the schematic automatically chooses the list type, and creates a menu from the possible values.\n\n### schema.json\n\n```\n      \"style\": {  \"description\": \"The file extension or preprocessor to use for style files.\",  \"type\": \"string\",  \"default\": \"css\",  \"enum\": [    \"css\",    \"scss\",    \"sass\",    \"less\",    \"styl\"  ],  \"x-prompt\": \"Which stylesheet format would you like to use?\"}\n\n```\n\ncheck\n\nThe prompt runtime automatically validates the provided response against the constraints provided in the JSON schema.\nIf the value is not acceptable, the user is prompted for a new value.\nThis ensures that any values passed to the schematic meet the expectations of the schematic's implementation, so that you do not need to add additional checks within the schematic's code.\n\n#### [Prompt long-form syntax](https://angular.dev/tools/cli/schematics-authoring\\#prompt-long-form-syntax)\n\nThe `x-prompt` field syntax supports a long form for cases where you require additional customization and control over the prompt.\nIn this form, the `x-prompt` field value is a JSON object with subfields that customize the behavior of the prompt.\n\n| Field | Data value |\n| :-- | :-- |\n| type | `confirmation`, `input`, or `list` (selected automatically in short form) |\n| message | string (required) |\n| items | string and/or label/value object pair (only valid with type `list`) |\n\nThe following example of the long form is from the JSON schema for the schematic that the CLI uses to [generate applications](https://github.com/angular/angular-cli/blob/ba8a6ea59983bb52a6f1e66d105c5a77517f062e/packages/schematics/angular/application/schema.json#L56).\nIt defines the prompt that lets users choose which style preprocessor they want to use for the application being created.\nBy using the long form, the schematic can provide more explicit formatting of the menu choices.\n\n### package/schematics/angular/application/schema.json\n\n```\n      \"style\": {  \"description\": \"The file extension or preprocessor to use for style files.\",  \"type\": \"string\",  \"default\": \"css\",  \"enum\": [    \"css\",    \"scss\",    \"sass\",    \"less\"  ],  \"x-prompt\": {    \"message\": \"Which stylesheet format would you like to use?\",    \"type\": \"list\",    \"items\": [      { \"value\": \"css\",  \"label\": \"CSS\" },      { \"value\": \"scss\", \"label\": \"SCSS   [ https://sass-lang.com/documentation/syntax#scss                ]\" },      { \"value\": \"sass\", \"label\": \"Sass   [ https://sass-lang.com/documentation/syntax#the-indented-syntax ]\" },      { \"value\": \"less\", \"label\": \"Less   [ https://lesscss.org/                                            ]\" }    ]  },},\n\n```\n\ncheck\n\n#### [x-prompt schema](https://angular.dev/tools/cli/schematics-authoring\\#x-prompt-schema)\n\nThe JSON schema that defines a schematic's options supports extensions to allow the declarative definition of prompts and their respective behavior.\nNo additional logic or changes are required to the code of a schematic to support the prompts.\nThe following JSON schema is a complete description of the long-form syntax for the `x-prompt` field.\n\n### x-prompt schema\n\n```\n      {    \"oneOf\": [        { \"type\": \"string\" },        {            \"type\": \"object\",            \"properties\": {                \"type\": { \"type\": \"string\" },                \"message\": { \"type\": \"string\" },                \"items\": {                    \"type\": \"array\",                    \"items\": {                        \"oneOf\": [                            { \"type\": \"string\" },                            {                                \"type\": \"object\",                                \"properties\": {                                    \"label\": { \"type\": \"string\" },                                    \"value\": { }                                },                                \"required\": [ \"value\" ]                            }                        ]                    }                }            },            \"required\": [ \"message\" ]        }    ]}\n\n```\n\ncheck\n\n## [Schematics CLI](https://angular.dev/tools/cli/schematics-authoring\\#schematics-cli)\n\nSchematics come with their own command-line tool.\nUsing Node 6.9 or later, install the Schematics command line tool globally:\n\n```\n      npm install -g @angular-devkit/schematics-cli\n\n```\n\ncheck\n\nThis installs the `schematics` executable, which you can use to create a new schematics collection in its own project folder, add a new schematic to an existing collection, or extend an existing schematic.\n\nIn the following sections, you will create a new schematics collection using the CLI to introduce the files and file structure, and some of the basic concepts.\n\nThe most common use of schematics, however, is to integrate an Angular library with the Angular CLI.\nDo this by creating the schematic files directly within the library project in an Angular workspace, without using the Schematics CLI.\nSee [Schematics for Libraries](https://angular.dev/tools/cli/tools/cli/schematics-for-libraries).\n\n### [Creating a schematics collection](https://angular.dev/tools/cli/schematics-authoring\\#creating-a-schematics-collection)\n\nThe following command creates a new schematic named `hello-world` in a new project folder of the same name.\n\n```\n      schematics blank --name=hello-world\n\n```\n\ncheck\n\nThe `blank` schematic is provided by the Schematics CLI.\nThe command creates a new project folder (the root folder for the collection) and an initial named schematic in the collection.\n\nGo to the collection folder, install your npm dependencies, and open your new collection in your favorite editor to see the generated files.\nFor example, if you are using VS Code:\n\n```\n      cd hello-worldnpm installnpm run buildcode .\n\n```\n\ncheck\n\nThe initial schematic gets the same name as the project folder, and is generated in `src/hello-world`.\nAdd related schematics to this collection, and modify the generated skeleton code to define your schematic's functionality.\nEach schematic name must be unique within the collection.\n\n### [Running a schematic](https://angular.dev/tools/cli/schematics-authoring\\#running-a-schematic)\n\nUse the `schematics` command to run a named schematic.\nProvide the path to the project folder, the schematic name, and any mandatory options, in the following format.\n\n```\n      schematics <path-to-schematics-project>:<schematics-name> --<required-option>=<value>\n\n```\n\ncheck\n\nThe path can be absolute or relative to the current working directory where the command is executed.\nFor example, to run the schematic you just generated (which has no required options), use the following command.\n\n```\n      schematics .:hello-world\n\n```\n\ncheck\n\n### [Adding a schematic to a collection](https://angular.dev/tools/cli/schematics-authoring\\#adding-a-schematic-to-a-collection)\n\nTo add a schematic to an existing collection, use the same command you use to start a new schematics project, but run the command inside the project folder.\n\n```\n      cd hello-worldschematics blank --name=goodbye-world\n\n```\n\ncheck\n\nThe command generates the new named schematic inside your collection, with a main `index.ts` file and its associated test spec.\nIt also adds the name, description, and factory function for the new schematic to the collection's schema in the `collection.json` file.\n\n## [Collection contents](https://angular.dev/tools/cli/schematics-authoring\\#collection-contents)\n\nThe top level of the root project folder for a collection contains configuration files, a `node_modules` folder, and a `src/` folder.\nThe `src/` folder contains subfolders for named schematics in the collection, and a schema, `collection.json`, which describes the collected schematics.\nEach schematic is created with a name, description, and factory function.\n\n```\n      {  \"$schema\":     \"../node_modules/@angular-devkit/schematics/collection-schema.json\",  \"schematics\": {    \"hello-world\": {      \"description\": \"A blank schematic.\",      \"factory\": \"./hello-world/index#helloWorld\"    }  }}\n\n```\n\ncheck\n\n- The `$schema` property specifies the schema that the CLI uses for validation.\n\n- The `schematics` property lists named schematics that belong to this collection.\nEach schematic has a plain-text description, and points to the generated entry function in the main file.\n\n- The `factory` property points to the generated entry function.\nIn this example, you invoke the `hello-world` schematic by calling the `helloWorld()` factory function.\n\n- The optional `schema` property points to a JSON schema file that defines the command-line options available to the schematic.\n\n- The optional `aliases` array specifies one or more strings that can be used to invoke the schematic.\nFor example, the schematic for the Angular CLI \"generate\" command has an alias \"g\", that lets you use the command `ng g`.\n\n\n### [Named schematics](https://angular.dev/tools/cli/schematics-authoring\\#named-schematics)\n\nWhen you use the Schematics CLI to create a blank schematics project, the new blank schematic is the first member of the collection, and has the same name as the collection.\nWhen you add a new named schematic to this collection, it is automatically added to the `collection.json` schema.\n\nIn addition to the name and description, each schematic has a `factory` property that identifies the schematic's entry point.\nIn the example, you invoke the schematic's defined functionality by calling the `helloWorld()` function in the main file, `hello-world/index.ts`.\n\n![overview](https://angular.dev/tools/cli/assets/images/guide/schematics/collection-files.gif)\n\nEach named schematic in the collection has the following main parts.\n\n| Parts | Details |\n| :-- | :-- |\n| `index.ts` | Code that defines the transformation logic for a named schematic. |\n| `schema.json` | Schematic variable definition. |\n| `schema.d.ts` | Schematic variables. |\n| `files/` | Optional component/template files to replicate. |\n\nIt is possible for a schematic to provide all of its logic in the `index.ts` file, without additional templates.\nYou can create dynamic schematics for Angular, however, by providing components and templates in the `files` folder, like those in standalone Angular projects.\nThe logic in the index file configures these templates by defining rules that inject data and modify variables.",
    "screenshot": "https://service.firecrawl.dev/storage/v1/object/public/media/screenshot-6e592ed0-7c24-473c-8d1b-7d2bc50b1c0c.png"
  },
  "metadata": {
    "twitter:url": "https://angular.dev/",
    "twitter:description": "The web development framework for building modern apps.",
    "og:image": "https://angular.dev/assets/images/ng-image.jpg",
    "twitter:card": "summary_large_image",
    "twitter:title": "Angular",
    "ogUrl": "https://angular.dev/",
    "ogImage": "https://angular.dev/assets/images/ng-image.jpg",
    "title": "Authoring schematics â€¢ Angular",
    "og:title": "Angular",
    "apple-mobile-web-app-title": "Angular",
    "og:description": "The web development framework for building modern apps.",
    "viewport": "width=device-width, initial-scale=1",
    "og:url": "https://angular.dev/",
    "ogTitle": "Angular",
    "theme-color": "#ffffff",
    "favicon": "https://angular.dev/assets/icons/favicon-48x48.png",
    "msapplication-config": "/assets/icons/browserconfig.xml",
    "ogDescription": "The web development framework for building modern apps.",
    "description": "The web development framework for building modern apps.",
    "og:type": "website",
    "twitter:image": "https://angular.dev/assets/images/ng-image.jpg",
    "application-name": "Angular",
    "msapplication-TileColor": "#e90464",
    "language": "en",
    "scrapeId": "1a7c348b-b8be-4de8-aec8-013094f126a3",
    "sourceURL": "https://angular.dev/tools/cli/schematics-authoring",
    "url": "https://angular.dev/tools/cli/schematics-authoring",
    "statusCode": 200
  }
}